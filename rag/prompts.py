# 策略选择提示词
STRATEGY_PROMPT = """
你是一个智能助手，负责分析用户查询 {update_query}，并从以下四种检索增强策略中选择一个最适合的策略，直接返回策略名称，不需要解释过程。

以下是几种检索增强策略及其适用场景：

1.  **直接检索：**
    * 描述：对用户查询直接进行检索，不进行任何增强处理。
    * 适用场景：适用于查询意图明确，需要从知识库中检索**特定信息**的问题，例如：
        * 示例：
            * 查询：freely的意思是什么？
            * 思考：这个问题比较简单，直接查询就行，所以使用直接检索。
            * 策略：直接检索
2.  **假设问题检索（HyDE）：**
    * 描述：使用 LLM 生成一个假设的答案，然后基于假设答案进行检索。
    * 适用场景：适用于查询较为抽象，直接检索效果不佳的问题，例如：
        * 示例：
            * 查询：请写一篇描写景色的作文
            * 思考：这个问题比较抽象，可以先生成一个近似的答案，再去检索这个答案相似的文档，效果更好，所以使用假设问题检索。
            * 策略：假设问题检索
3.  **子查询检索：**
    * 描述：将复杂的用户查询拆分为多个简单的子查询，分别检索并合并结果。
    * 适用场景：适用于查询涉及多个实体或方面，需要分别检索不同信息的问题，例如：
        * 示例：
            * 查询：请写一篇关于图书馆的建议信。
            * 思考：需要分别查询关于图书馆的范文和建议信的模版，所以使用子查询检索。
            * 策略：子查询检索
4.  **回溯问题检索：**
    * 描述：将复杂的用户查询转化为更基础、更易于检索的问题，然后进行检索。
    * 适用场景：适用于查询较为复杂，需要简化后才能有效检索的问题，例如：
        * 示例：
            * 查询：我是一名高三的学生，性格外向，可以帮我写一篇自我介绍吗？
            * 思考：不论学生什么性别喜好，只要查询相应范文就行了。可以对原问题进行简化，查询 '自我介绍的范文'，所以使用回溯问题检索。
            * 策略：回溯问题检索

根据用户查询 {update_query}，直接返回最适合的策略名称，例如 "直接检索"。不要输出任何分析过程或其他内容。
"""

# HyDE提示词
HYDE_PROMPT = """假设你是用户，想查找与以下英语学习问题相关的资料（单词、范文或写作模版），请生成一个简短的假设性英文答案。
注意：直接输出包含相关英语词汇、短语或段落的假设内容即可，无需解释。

例如：
问题：我想写一篇关于“环境保护”的英语作文，有什么参考？
假设答案：Protecting the environment is our responsibility. We should reduce pollution, save water, and plant more trees. Global warming is a serious issue. For example, we can refuse single-use plastics to make the earth greener.


问题: {update_query}
假设答案:"""

# 子查询提示词
SUBQUERY_PROMPT = """将以下涉及英语写作的复杂查询分解为多个简单的子查询，以便在数据库中分别检索“话题素材”和“写作模版”。最多生成3个子查询。只输出子查询内容，每行一个。

例如：
问题：帮我写一篇关于保护环境的议论文。
子查询：
关于环境保护的英语单词和范文
英语议论文写作模版

问题：我想写一封关于改善图书馆设施的建议信。
子查询：
关于图书馆设施的英语表达
英语建议信通用模版

问题: {update_query}
子查询:"""

# 回溯问题提示词
BACKTRACKING_PROMPT = """将以下包含背景描述、情感表达或冗余信息的复杂查询，简化为一个核心搜索意图。
请去除无关的修饰语，重点保留需要查询的“主题（Topic）”和“文体/类型（Format）”。只输出简化后的问题即可。

例如：
问题：我下周要参加演讲比赛，有点紧张，想找一篇关于“坚持”的英语演讲稿参考。
简化问题：关于坚持的英语演讲稿

问题：想给我的外国笔友写信介绍一下图书馆，有没有相关的表达？
简化问题：图书馆介绍信的英语表达

问题：有些描写“下雨天”的高级单词或句子吗？我想用在作文里。
简化问题：描写下雨天的英语单词和句子

问题: {update_query}
简化问题:"""

SEARCH_JUDGE_PROMPT = "请判断我的问题是否需要查询知识库，我的知识库是关于英语作文和单词的，如果查询单词意思（单个单词也算查询意思）或者作文写法以及英语学习相关内容的时候，需要查询知识库，问题如下：{update_query}，如果需要查询知识库，请返回True，否则返回False。不要带多余的语句."


SMART_SPEAKER_PROMPT = "请根据我们之前的对话回答问题：{update_query}"

# 带参考内容的智能音箱提示词
SMART_SPEAKER_WITH_REFERENCE_PROMPT = "请根据以下参考内容回答问题：\n{reference}\n问题：{update_query}\n答案："
